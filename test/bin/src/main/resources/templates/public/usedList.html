<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:th="https://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout_public}">

<head>
	<meta charset="UTF-8">

	<style>
		.row {
			display: flex;
			flex-direction: row;
		}

		.nav {
			display: flex;
			flex-direction: row;
			padding: 10px;
		}

		.col {
			display: flex;
			flex-direction: column;
			text-align: center;
		}

		.product-image {
			max-width: 250px;

			height: auto;
			margin: 30px;

		}

		.category-buttons {
			display: flex;
			justify-content: center;
			margin-bottom: 20px;
		}

		.category-buttons .category {
			font-size: 18px;
			padding: 20px 160px;
			/* 버튼 크기 조절 */
		}
		table {
            width: 100%;
            border: 1px solid #444444;
            text-align: center;
        }
        th, td {
            border: 1px solid #444444;
        }
	</style>
</head>

<body>
	<div layout:fragment="content">
		<p>중고 옷 사이트</p>

		<div class="category-buttons">
			<button class="category" id="tops">상의</button>
			<button class="category" id="bottoms">하의</button>
			<button class="category" id="outerwear">아우터</button>
			<button class="category" id="shoes">신발</button>
		</div>
		<button onclick="location.href='/protected/usedForm'" sec:authorize="hasRole('ROLE_USER')">중고 글등록</button>
		<table>
			<tr>
				<th>#</th>
				<th>제목</th>
				<th>상품</th>
				<th>가격</th>
				<th>주문내역</th>
				<th>글쓴이</th>
				<th>작성일</th>
			</tr>
			<tr th:each="used, index : ${usedList}">
				<td th:text="${index.index}">#</td>
				<td><a th:text="${used.title}" th:href="'/public/used/'+${used.id}">제목</a></td>
				<td><a th:text="${used.orderProduct.product.name}" th:href="'/public/product/'+${used.orderProduct.product.id}">상품</a></td>
				<td th:text="${used.price}">가격</td>
				<td th:text="${#temporals.format(used.orderProduct.order.orderDate, 'yyyy-MM-dd HH:mm')}">주문 내역</td>
				
				<td th:text="${used.orderProduct.order.user.username}">글쓴이</td>
				<td th:text="${#temporals.format(used.createDate, 'yyyy-MM-dd HH:mm')}">작성일</td>
				
				<!-- <td th:text="${event.endDateTime}">2019년 1월 10일 오전 12시</td> -->
				<!-- <td th:text="${index}">index</td> -->
			</tr>
		</table>

		<script>
 			$(document).ready(function(){
                var errorMessage = [[${errorMessage}]];
                if(errorMessage != null){
                    alert(errorMessage);
                }

                bindDomEvent();

            });

			const categoryElements = document.querySelectorAll('.category');
	
			categoryElements.forEach(button => {
				button.addEventListener('click', () => {
					const categoryId = button.id;
	
					if (categoryId === 'tops') {
						// 상의 페이지로 전환
						location.href = 'top';
					} else if (categoryId === 'bottoms') {
						// 하의 페이지로 전환
						contentDiv.innerHTML = '<h1>하의 페이지</h1><p>이곳에 하의 관련 내용이 들어갑니다.</p>';
					} else if (categoryId === 'outerwear') {
						// 아우터 페이지로 전환
						contentDiv.innerHTML = '<h1>아우터 페이지</h1><p>이곳에 아우터 관련 내용이 들어갑니다.</p>';
					} else if (categoryId === 'shoes') {
						// 신발 페이지로 전환
						contentDiv.innerHTML = '<h1>신발 페이지</h1><p>이곳에 신발 관련 내용이 들어갑니다.</p>';
					}
				});
			});

			


		</script>
	</div>
	

</body>

</html>